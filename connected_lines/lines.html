<!DOCTYPE html>
<html>
<head>
  <title>Lines</title>
  </head>
  <body>
    <canvas style="border-style:solid;padding: 0;" id="canv"></canvas>
    <pre id="coords"></pre>
    <script>
      var c = document.getElementById("canv");
      var ctx = c.getContext("2d");

      class Square {
        constructor(x, y, wh, ctxt){
          this.xpos = x;
          this.ypos = y;
          this.size = wh;
          this.ctx = ctxt;
          this.selected = false;
          this.pointerx = 0;
          this.pointery = 0;
        }
        draw(){
          this.ctx.beginPath();
          this.ctx.rect(this.xpos, this.ypos, this.size, this.size);
          this.ctx.stroke();
        }
        pointer_in(ptrx, ptry){
          if(ptrx >= this.xpos && ptrx <= this.xpos + this.size && ptry >= this.ypos && ptry <= this.ypos + this.size){
            return true;
          } else {
            return false;
          }
        }
      };

      let sq1 = new Square(10,10,30,ctx);
      sq1.draw();
      console.log(sq1.pointer_in(20,20));

let rect = ctx.canvas.getBoundingClientRect();

c.addEventListener('mousedown', e => {
  let x = e.clientX - rect.left;
  let y = e.clientY - rect.top;

  if(sq1.pointer_in(x,y)){
    sq1.selected = true;
    sq1.pointerx = x - sq1.xpos;
    sq1.pointery = y - sq1.ypos;
  }
});

c.addEventListener('mousemove', e => {
  var output = "";
  let x = e.clientX - rect.left;
  let y = e.clientY - rect.top;

  if(sq1.pointer_in(x,y)){
    output = "[" + x + ", " + y + "]";
  } else {
    output = x + ", " + y ;
  }

  if(sq1.selected){
    console.log(x + ", " + y);
    sq1.xpos = x - sq1.pointerx;
    sq1.ypos = y - sq1.pointery;
    sq1.draw();
  }

  document.getElementById("coords").innerHTML = output;
});

window.addEventListener('mouseup', e => {
  sq1.selected = false;
});

    </script>
  </body>
</html>